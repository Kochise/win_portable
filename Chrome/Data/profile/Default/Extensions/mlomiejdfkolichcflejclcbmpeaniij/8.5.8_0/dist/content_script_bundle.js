"undefined"!=typeof browser&&(chrome=browser),function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=695)}({108:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
function(e,t,n){let r,s;return(...o)=>{const i=Date.now();r&&i<r+n?(e.clearTimeout(s),s=e.setTimeout(()=>{r=i,t(...o)},n)):(r=i,t(...o))}},t.debounce=function(e,t){let n=null;return t?function(...r){(0,o.clearTimeout)(n);n=(0,o.setTimeout)(()=>{n=null,e(...r)},t)}:e},t.deadline=function(e,t){return Promise.race([(0,s.default)(t),e])},t.nextTick=i,t.nextIdle=function(){if("undefined"==typeof window||!window.requestIdleCallback)return i(()=>{});return new Promise(e=>{window.requestIdleCallback(e)})},t.withTimeout=a,t.tryPromise=async function(e,t=1e3){try{return await a(e,t)}catch(e){return"Failed: "+e}};var r,s=(r=n(327))&&r.__esModule?r:{default:r},o=n(146);function i(e,...t){return Promise.resolve().then(()=>e(...t))}async function a(e,t){let n;try{return n=new Promise((e,n)=>{(0,o.setTimeout)(()=>n(new Error(`Timed out after ${t/1e3} seconds`)),t)}),await Promise.race([e,n])}finally{(0,o.clearTimeout)(n)}}},146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"setInterval",{enumerable:!0,get:function(){return r.setInterval}}),Object.defineProperty(t,"setTimeout",{enumerable:!0,get:function(){return r.setTimeout}}),Object.defineProperty(t,"clearTimeout",{enumerable:!0,get:function(){return r.clearTimeout}}),Object.defineProperty(t,"clearInterval",{enumerable:!0,get:function(){return r.clearInterval}});var r=n(244)},161:function(e,t,n){"use strict";n.d(t,"c",(function(){return _})),n.d(t,"d",(function(){return T})),n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return R}));function r(e,t){r=function(e,t){return new c(e,void 0,t)};var n=o(RegExp),i=RegExp.prototype,a=new WeakMap;function c(e,t,r){var s=n.call(this,e,t);return a.set(s,r||a.get(e)),s}function l(e,t){var n=a.get(t);return Object.keys(n).reduce((function(t,r){return t[r]=e[n[r]],t}),Object.create(null))}return s(c,n),c.prototype.exec=function(e){var t=i.exec.call(this,e);return t&&(t.groups=l(t,this)),t},c.prototype[Symbol.replace]=function(e,t){if("string"==typeof t){var n=a.get(this);return i[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+n[t]})))}if("function"==typeof t){var r=this;return i[Symbol.replace].call(this,e,(function(){var e=[];return e.push.apply(e,arguments),"object"!=typeof e[e.length-1]&&e.push(l(e,r)),t.apply(this,e)}))}return i[Symbol.replace].call(this,e,t)},r.apply(this,arguments)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function o(e){var t="function"==typeof Map?new Map:void 0;return(o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return i(e,arguments,l(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,e)})(e)}function i(e,t,n){return(i=a()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var s=new(Function.bind.apply(e,r));return n&&c(s,n.prototype),s}).apply(null,arguments)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}
/*!
 * Based on parsel. Extended by Rémi Berson for Ghostery (2021).
 * https://github.com/LeaVerou/parsel
 *
 * MIT License
 *
 * Copyright (c) 2020 Lea Verou
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */const u=new Set(["any","dir","has","host-context","if","if-not","is","matches","not","where"]),m={attribute:r(/\[[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(\*|[\x2D0-9A-Z_a-z]*)\|)?([\x2D0-9A-Z_a-z\x80-\uFFFF]+)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:([\0-\/:-@\[-\^`\{-\u{10FFFF}]?=)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*([\0-\t\x0B\f\x0E-\u2027\u202A-\u{10FFFF}]+?)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*([ISis])?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?\]/gu,{namespace:1,name:2,operator:3,value:4,caseSensitive:5}),id:r(/#((?:[\x2D0-9A-Z_a-z\x80-\uFFFF]|\\[\0-\t\x0B\f\x0E-\u2027\u202A-\u{10FFFF}])+)/gu,{name:1}),class:r(/\.((?:[\x2D0-9A-Z_a-z\x80-\uFFFF]|\\[\0-\t\x0B\f\x0E-\u2027\u202A-\u{10FFFF}])+)/gu,{name:1}),comma:/\s*,\s*/g,combinator:/\s*[\s>+~]\s*/g,"pseudo-element":r(/::([\x2D0-9A-Z_a-z\x80-\uFFFF]+)(?:\((?:\xB6*)\))?/gu,{name:1}),"pseudo-class":r(/:([\x2D0-9A-Z_a-z\x80-\uFFFF]+)(?:\((\xB6*)\))?/gu,{name:1,argument:2}),type:r(/(?:(\*|[\x2D0-9A-Z_a-z]*)\|)?([\x2D0-9A-Z_a-z\x80-\uFFFF]+)|\*/gu,{namespace:1,name:2})},d=new Set(["pseudo-class","pseudo-element"]),g=new Set([...d,"attribute"]),f=new Set(["combinator","comma"]),p=Object.assign({},m);function h(e,t){e.lastIndex=0;const n=e.exec(t);if(null===n)return;const r=n.index-1,s=n[0],o=t.slice(0,r+1),i=t.slice(r+s.length+1);return[o,[s,n.groups||{}],i]}p["pseudo-element"]=RegExp(m["pseudo-element"].source.replace("(?<argument>¶*)","(?<argument>.*?)"),"gu"),p["pseudo-class"]=RegExp(m["pseudo-class"].source.replace("(?<argument>¶*)","(?<argument>.*)"),"gu");const A=[e=>{const t=h(m.attribute,e);if(void 0===t)return;const[n,[r,{name:s,operator:o,value:i,namespace:a,caseSensitive:c}],l]=t;return void 0!==s?[n,{type:"attribute",content:r,length:r.length,namespace:a,caseSensitive:c,pos:[],name:s,operator:o,value:i},l]:void 0},e=>{const t=h(m.id,e);if(void 0===t)return;const[n,[r,{name:s}],o]=t;return void 0!==s?[n,{type:"id",content:r,length:r.length,pos:[],name:s},o]:void 0},e=>{const t=h(m.class,e);if(void 0===t)return;const[n,[r,{name:s}],o]=t;return void 0!==s?[n,{type:"class",content:r,length:r.length,pos:[],name:s},o]:void 0},e=>{const t=h(m.comma,e);if(void 0===t)return;const[n,[r],s]=t;return[n,{type:"comma",content:r,length:r.length,pos:[]},s]},e=>{const t=h(m.combinator,e);if(void 0===t)return;const[n,[r],s]=t;return[n,{type:"combinator",content:r,length:r.length,pos:[]},s]},e=>{const t=h(m["pseudo-element"],e);if(void 0===t)return;const[n,[r,{name:s}],o]=t;return void 0!==s?[n,{type:"pseudo-element",content:r,length:r.length,pos:[],name:s},o]:void 0},e=>{const t=h(m["pseudo-class"],e);if(void 0===t)return;const[n,[r,{name:s,argument:o}],i]=t;return void 0!==s?[n,{type:"pseudo-class",content:r,length:r.length,pos:[],name:s,argument:o},i]:void 0},e=>{const t=h(m.type,e);if(void 0===t)return;const[n,[r,{name:s,namespace:o}],i]=t;return[n,{type:"type",content:r,length:r.length,namespace:o,pos:[],name:s},i]}];function y(e,t,n,r){for(const s of t)for(const t of e)if(r.has(t.type)&&t.pos[0]<s.start&&s.start<t.pos[1]){const e=t.content;if(t.content=t.content.replace(n,s.str),t.content!==e){p[t.type].lastIndex=0;const e=p[t.type].exec(t.content);null!==e&&Object.assign(t,e.groups)}}}function b(e,t){let n=0;for(t-=1;t>=0&&"\\"===e[t];)n+=1,t-=1;return n%2!=0}function v(e,t,n){let r=n+1;for(;-1!==(r=e.indexOf(t,r))&&!0===b(e,r);)r+=1;if(-1!==r)return e.slice(n,r+1)}function w(e,t){let n=0;for(let r=t;r<e.length;r++){const s=e[r];if("("===s)n+=1;else if(")"===s){if(!(n>0))return;n-=1}if(0===n)return e.slice(t,r+1)}}function x(e,t,n,r){const s=[];let o=0;for(;-1!==(o=e.indexOf(n,o));){const n=r(e,o);if(void 0===n)break;s.push({str:n,start:o}),e=`${e.slice(0,o+1)}${t.repeat(n.length-2)}${e.slice(o+n.length-1)}`,o+=n.length}return[s,e]}function E(e){if("string"!=typeof e)return[];if(0===(e=e.trim()).length)return[];const[t,n]=x(e,"§",'"',(e,t)=>v(e,'"',t)),[r,s]=x(n,"§","'",(e,t)=>v(e,"'",t)),[o,i]=x(s,"¶","(",w),a=function(e){if(!e)return[];const t=[e];for(const e of A)for(let n=0;n<t.length;n++){const r=t[n];if("string"==typeof r){const s=e(r);void 0!==s&&t.splice(n,1,...s.filter(e=>0!==e.length))}}let n=0;for(const e of t)"string"!=typeof e&&(e.pos=[n,n+e.length],f.has(e.type)&&(e.content=e.content.trim()||" ")),n+=e.length;return t.every(e=>"string"!=typeof e)?t:[]}(i);return y(a,o,/\(¶*\)/,d),y(a,t,/"§*"/,g),y(a,r,/'§*'/,g),a}function _(e,{recursive:t=!0,list:n=!0}={}){const r=E(e);if(0===r.length)return;const s=function e(t,{list:n=!0}={}){if(!0===n&&t.some(e=>"comma"===e.type)){const n=[],r=[];for(let s=0;s<t.length;s+=1){const o=t[s];if("comma"===o.type){if(0===r.length)throw new Error("Incorrect comma at "+s);const t=e(r,{list:!1});void 0!==t&&n.push(t),r.length=0}else r.push(o)}if(0===r.length)throw new Error("Trailing comma");{const t=e(r,{list:!1});void 0!==t&&n.push(t)}return{type:"list",list:n}}for(let n=t.length-1;n>=0;n--){const r=t[n];if("combinator"===r.type){const s=e(t.slice(0,n)),o=e(t.slice(n+1));if(void 0===o)return;if(" "!==r.content&&"~"!==r.content&&"+"!==r.content&&">"!==r.content)return;return{type:"complex",combinator:r.content,left:s,right:o}}}if(0!==t.length)return function(e){return e.every(e=>"comma"!==e.type&&"combinator"!==e.type)}(t)?1===t.length?t[0]:{type:"compound",compound:[...t]}:void 0}(r,{list:n});return!0===t&&function e(t,n,r,s){if(void 0!==t){if("complex"===t.type)e(t.left,n,r,t),e(t.right,n,r,t);else if("compound"===t.type)for(const s of t.compound)e(s,n,r,t);else"pseudo-class"===t.type&&void 0!==t.subtree&&void 0!==r&&"pseudo-class"===r.type&&void 0!==r.subtree&&e(t.subtree,n,r,t);n(t,s)}}(s,e=>{"pseudo-class"===e.type&&e.argument&&void 0!==e.name&&u.has(e.name)&&(e.subtree=_(e.argument,{recursive:!0,list:!0}))}),s}
/*!
 * Copyright (c) 2017-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */function S(e,t){if("id"===t.type||"class"===t.type||"type"===t.type||"attribute"===t.type)return e.matches(t.content);if("list"===t.type)return t.list.some(t=>S(e,t));if("compound"===t.type)return t.compound.every(t=>S(e,t));if("pseudo-class"===t.type){if("has"===t.name||"if"===t.name)return void 0!==t.subtree&&0!==T(e,t.subtree).length;if("not"===t.name)return void 0!==t.subtree&&!1===S(e,t.subtree);if("has-text"===t.name){const{argument:n}=t;if(void 0===n)return!1;const r=e.textContent;return null!==r&&function(e,t){if(e.startsWith("/")&&(e.endsWith("/")||e.endsWith("/i"))){let n=!0;return(e=e.slice(1)).endsWith("/")?e=e.slice(0,-1):(e=e.slice(0,-2),n=!1),new RegExp(e,!1===n?"i":void 0).test(t)}return t.includes(e)}(n,r)}if("min-text-length"===t.name){const n=Number(t.argument);if(Number.isNaN(n)||n<0)return!1;const r=e.textContent;return null!==r&&r.length>=n}}return!1}function T(e,t){const n=[];if("id"===t.type||"class"===t.type||"type"===t.type||"attribute"===t.type)n.push(...e.querySelectorAll(t.content));else if("list"===t.type)for(const r of t.list)n.push(...T(e,r));else if("compound"===t.type)0!==t.compound.length&&n.push(...T(e,t.compound[0]).filter(e=>t.compound.slice(1).every(t=>S(e,t))));else if("complex"===t.type){const r=void 0===t.left?[e]:T(e,t.left);if(" "===t.combinator)for(const e of r)n.push(...T(e,t.right));else if(">"===t.combinator)for(const e of r)for(const r of e.children)!0===S(r,t.right)&&n.push(r);else if("~"===t.combinator)for(const e of r){let r=e;for(;null!==(r=r.nextElementSibling);)!0===S(r,t.right)&&n.push(r)}else if("+"===t.combinator)for(const e of r){const r=e.nextElementSibling;null!==r&&!0===S(r,t.right)&&n.push(r)}}else if("pseudo-class"===t.type)for(const r of e.querySelectorAll("*"))!0===S(r,t)&&n.push(r);return n}
/*!
 * Copyright (c) 2017-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */const O=new Set(["has","has-text","if"]),k=new Set(["active","any","any-link","blank","checked","default","defined","dir","disabled","empty","enabled","first","first-child","first-of-type","focus","focus-visible","focus-within","fullscreen","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","matches","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","placeholder-shown","read-only","read-write","required","right","root","scope","target","valid","visited","where"]),C=new Set(["after","before","first-letter","first-line"]);var M;function R(e){if(-1===e.indexOf(":"))return M.Normal;const t=E(e);let n=!1;for(const e of t)if("pseudo-class"===e.type){const{name:t}=e;if(!0===O.has(t))n=!0;else if(!1===k.has(t)&&!1===C.has(t))return M.Invalid;if(!1===n&&void 0!==e.argument&&!0===u.has(t)){const t=R(e.argument);if(t===M.Invalid)return t;t===M.Extended&&(n=!0)}}return!0===n?M.Extended:M.Normal}
/*!
 * Copyright (c) 2017-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */!function(e){e[e.Normal=0]="Normal",e[e.Extended=1]="Extended",e[e.Invalid=2]="Invalid"}(M||(M={}))},185:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=n(213))&&r.__esModule?r:{default:r};
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
var o=("undefined"!=typeof browser?browser:s.default).runtime;t.default=o},191:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerContentScript=function(e){if(void 0===e.module)return void o.default.error('"module" property should be specified in content.es',e);if(!1===Array.isArray(e.js))return void o.default.error('"js" should be an array of functions',e);if(!1===Array.isArray(e.matches))return void o.default.error('"matches" should be an array of match patterns',e);if(void 0!==e.excludeMatches&&!1===Array.isArray(e.excludeMatches))return void o.default.error('"excludeMatches" should either be undefined or an array of match patterns',e);c.push(e)},t.runContentScripts=function(e,t,n){const r={};for(const s of c){const{module:i,js:c}=s,{isEnabled:l}=n.app.modules[i]||{isEnabled:!1};if(l&&a(e,s))for(const s of c)try{const o=s(e,t,n)||{};r[i]={...r[i],...o}}catch(e){o.default.error(`CLIQZ content-script failed: ${e} ${e.stack}`)}}return r};var r=i(n(700)),s=n(423),o=i(n(701));function i(e){return e&&e.__esModule?e:{default:e}}
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */function a(e,t){if(!1===(0,s.isTopWindow)(e)&&!0!==t.allFrames)return!1;let n=e.location.href;if("about:blank"===n||"about:srcdoc"===n){if(!0!==t.matchAboutBlank)return!1;if(!e.parent)return!1;n=e.parent.location.href}if(void 0!==t.excludeMatches)for(const e of t.excludeMatches)if((0,r.default)(e,n))return!1;for(const e of t.matches)if((0,r.default)(e,n))return!0;return!1}const c=[]},213:function(e,t,n){var r,s,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,s=[e],void 0===(o="function"==typeof(r=function(e){"use strict";if("undefined"==typeof browser||Object.getPrototypeOf(browser)!==Object.prototype){const t="The message port closed before a response was received.",n="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",r=e=>{const r={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(r).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class s extends WeakMap{constructor(e,t){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const o=(t,n)=>(...r)=>{e.runtime.lastError?t.reject(e.runtime.lastError):n.singleCallbackArg||r.length<=1&&!1!==n.singleCallbackArg?t.resolve(r[0]):t.resolve(r)},i=e=>1==e?"argument":"arguments",a=(e,t,n)=>new Proxy(t,{apply:(t,r,s)=>n.call(r,e,...s)});let c=Function.call.bind(Object.prototype.hasOwnProperty);const l=(e,t={},n={})=>{let r=Object.create(null),s={has:(t,n)=>n in e||n in r,get(s,u,m){if(u in r)return r[u];if(!(u in e))return;let d=e[u];if("function"==typeof d)if("function"==typeof t[u])d=a(e,e[u],t[u]);else if(c(n,u)){let t=((e,t)=>function(n,...r){if(r.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${i(t.minArgs)} for ${e}(), got ${r.length}`);if(r.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${i(t.maxArgs)} for ${e}(), got ${r.length}`);return new Promise((s,i)=>{if(t.fallbackToNoCallback)try{n[e](...r,o({resolve:s,reject:i},t))}catch(o){console.warn(e+" API method doesn't seem to support the callback parameter, falling back to call it without a callback: ",o),n[e](...r),t.fallbackToNoCallback=!1,t.noCallback=!0,s()}else t.noCallback?(n[e](...r),s()):n[e](...r,o({resolve:s,reject:i},t))})})(u,n[u]);d=a(e,e[u],t)}else d=d.bind(e);else if("object"==typeof d&&null!==d&&(c(t,u)||c(n,u)))d=l(d,t[u],n[u]);else{if(!c(n,"*"))return Object.defineProperty(r,u,{configurable:!0,enumerable:!0,get:()=>e[u],set(t){e[u]=t}}),d;d=l(d,t[u],n["*"])}return r[u]=d,d},set:(t,n,s,o)=>(n in r?r[n]=s:e[n]=s,!0),defineProperty:(e,t,n)=>Reflect.defineProperty(r,t,n),deleteProperty:(e,t)=>Reflect.deleteProperty(r,t)},u=Object.create(e);return new Proxy(u,s)},u=e=>({addListener(t,n,...r){t.addListener(e.get(n),...r)},hasListener:(t,n)=>t.hasListener(e.get(n)),removeListener(t,n){t.removeListener(e.get(n))}});let m=!1;const d=new s(e=>"function"!=typeof e?e:function(t,r,s){let o,i,a=!1,c=new Promise(e=>{o=function(t){m||(console.warn(n,(new Error).stack),m=!0),a=!0,e(t)}});try{i=e(t,r,o)}catch(e){i=Promise.reject(e)}const l=!0!==i&&(u=i)&&"object"==typeof u&&"function"==typeof u.then;var u;if(!0!==i&&!l&&!a)return!1;const d=e=>{e.then(e=>{s(e)},e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",s({__mozWebExtensionPolyfillReject__:!0,message:t})}).catch(e=>{console.error("Failed to send onMessage rejected reply",e)})};return d(l?i:c),!0}),g=({reject:n,resolve:r},s)=>{e.runtime.lastError?e.runtime.lastError.message===t?r():n(e.runtime.lastError):s&&s.__mozWebExtensionPolyfillReject__?n(new Error(s.message)):r(s)},f=(e,t,n,...r)=>{if(r.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${i(t.minArgs)} for ${e}(), got ${r.length}`);if(r.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${i(t.maxArgs)} for ${e}(), got ${r.length}`);return new Promise((e,t)=>{const s=g.bind(null,{resolve:e,reject:t});r.push(s),n.sendMessage(...r)})},p={runtime:{onMessage:u(d),onMessageExternal:u(d),sendMessage:f.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:f.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},h={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return r.privacy={network:{"*":h},services:{"*":h},websites:{"*":h}},l(e,p,r)};if("object"!=typeof chrome||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");e.exports=r(chrome)}else e.exports=browser})?r.apply(t,s):r)||(e.exports=o)},244:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearInterval=t.clearTimeout=t.setInterval=t.setTimeout=void 0;t.setTimeout=(...e)=>("undefined"==typeof setTimeout?window.setTimeout.bind(window):setTimeout)(...e);t.setInterval=(...e)=>("undefined"==typeof setInterval?window.setInterval.bind(window):setInterval)(...e);t.clearTimeout=(...e)=>("undefined"==typeof clearTimeout?window.clearTimeout.bind(window):clearTimeout)(...e);t.clearInterval=(...e)=>("undefined"==typeof clearInterval?window.clearInterval.bind(window):clearInterval)(...e)},327:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
function(e){return new Promise(t=>(0,r.setTimeout)(t,e))};var r=n(146)},336:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeAclkUrl=
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
function(e){const t=e.split("aclk?");if(2!==t.length)throw new Error('Expected Google pagead "aclk" URL. Instead got: '+e);return t[1].replace(/ved=.*&/,"").replace(/&q=&adurl=$/,"").replace(/&adurl=&q=$/,"")}},39:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={platform:"webextension",brocfile:"Brocfile.ghostery.js",baseURL:"/cliqz/",pack:"npm pack",publish:'echo "Uploading version: browser-core-$PACKAGE_VERSION.tgz" && aws s3 cp browser-core-$PACKAGE_VERSION.tgz s3://cdncliqz/update/edge/ghostery/$BRANCH_NAME/$VERSION.${GIT_COMMIT:0:7}.tgz --acl public-read && aws s3 cp s3://cdncliqz/update/edge/ghostery/$BRANCH_NAME/$VERSION.${GIT_COMMIT:0:7}.tgz s3://cdncliqz/update/edge/ghostery/$BRANCH/latest.tgz --acl public-read',sourceMaps:!1,format:"common",settings:{ANOLYSIS_BACKEND_URL:"https://anolysis.privacy.ghostery.net",ANOLYSIS_STAGING_BACKEND_URL:"https://anolysis-staging.privacy.ghostery.net",BACKGROUND_IMAGE_URL:"https://cdn.ghostery.net/brands-database/database/",BW_URL:"https://antiphishing.ghostery.net/api/v1/",CDN_BASEURL:"https://cdn.ghostery.net",ADBLOCKER_BASE_URL:"https://cdn.ghostery.com/adblocker/configs",ANTITRACKING_BASE_URL:"https://cdn.ghostery.com/antitracking",CONFIG_PROVIDER:"https://api.ghostery.net/api/v1/config",ENDPOINT_ANONPATTERNSURL:"https://cdn2.ghostery.com/human-web-chromium/patterns-anon.gz",ENDPOINT_HPNV2_DIRECT:"https://collector-hpn.ghostery.net",ENDPOINT_HPNV2_ANONYMOUS:"https://collector-hpn.ghostery.net",ENDPOINT_HUMAN_WEB_PATTERNS:"https://cdn2.ghostery.com/human-web-chromium/hw-patterns.gz",ENDPOINT_PATTERNSURL:"https://cdn2.ghostery.com/human-web-chromium/patterns.gz",ENDPOINT_SAFE_QUORUM_ENDPOINT:"https://safe-browsing-quorum.privacy.ghostery.net/",ENDPOINT_SAFE_QUORUM_PROVIDER:"https://safe-browsing-quorum.privacy.ghostery.net/config",FEEDBACK:"https://ghostery.net/feedback/",HB_NEWS:"hb-news.ghostery.net",OFFERS_BE_BASE_URL:"https://offers-api.ghostery.net",OFFERS_STAGING_BASE_URL:"https://offers-api-staging-myo.myoffrz.ninja",PRIVACY_SCORE_URL:"https://anti-tracking.ghostery.net/api/v1/score?",TRACKER_SCORE_URL:"https://cdn.ghostery.net/privacy-score/privacy_score.json",RESULTS_PROVIDER:"https://api.ghostery.net/api/v2/results?nrh=1&q=",RESULTS_PROVIDER_LOG:"https://api.ghostery.net/api/v1/logging?q=",RICH_HEADER:"https://api.ghostery.net/api/v2/rich-header?path=/v2/map",ROTATED_TOP_NEWS:"rotated-top-news.ghostery.net",SAFE_BROWSING:"https://safe-browsing.ghostery.net",STATISTICS:"https://stats.ghostery.net",SUGGESTIONS_URL:"https://ghostery.net/search?q=",UNINSTALL:"https://ghostery.net/home/offboarding",WTM_API:"https://whotracks.me/data/",ANTIPHISHING_BLOOMFILTER:"https://cdn.ghostery.net/anti-phishing/bloom_filter.json.gz",SUPPORT_URL:"https://www.ghostery.com/support/",PRIVACY_POLICY_URL:"https://www.ghostery.com/about-ghostery/privacy-statements/",NEW_TAB_URL:"/freshtab/home.html",channel:"CH80",MSGCHANNEL:"web-extension",URL_CHANGED_EVENT_DEBOUNCE:500,ATTRACK_TELEMETRY_PROVIDER:"hpnv2",HW_CHANNEL:"ghostery",ALLOWED_COUNTRY_CODES:["de","at","ch","es","us","fr","nl","gb","it","be","se","dk","fi","cz","gr","hu","ro","no","ca","au","ru","ua","in","pl","jp","br","mx","cn","ar"],antitrackingPlaceholder:"ghostery",antitrackingHeader:"Ghostery-AntiTracking",telemetry:{demographics:{brand:"ghostery",name:"extension"}},HUMAN_WEB_LITE_COLLECTOR_VIA_PROXY:"https://collector-hpn.ghostery.net",HUMAN_WEB_LITE_COLLECTOR_DIRECT:"https://collector-hpn.ghostery.net",frameScriptWhitelist:["http://localhost:3000/"]},default_prefs:{"modules.human-web.enabled":!0,"modules.antitracking.enabled":!0,"modules.anti-phishing.enabled":!1,"modules.adblocker.enabled":!0,"modules.insights.enabled":!1,"cliqz-adb":1,attrackBloomFilter:!0,humanWeb:!0,"cliqz-anti-phishing":!0,"cliqz-anti-phishing-enabled":!0,attrackTelemetryMode:1,attrackDefaultAction:"placeholder",sendAntiTrackingHeader:!1,telemetry:!1,attrackCookieTrustReferers:!0,"attrack.cookieMode":"ghostery"},bundles:["core/content-script.bundle.js","hpnv2/worker.wasm.bundle.js","hpnv2/worker.asmjs.bundle.js","human-web/rusha.bundle.js"],modules:["core","human-web","hpnv2","antitracking","webrequest-pipeline","adblocker","anolysis","anti-phishing","insights","hpn-lite","human-web-lite"],environment:"development",isBeta:!1,EXTENSION_VERSION:"1.2.1",VERSION:"1.2.1"}},423:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTopWindow=
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
function(e){return e.self===e.top},t.documentBodyReady=function(){if(window.document&&window.document.body)return Promise.resolve();return new Promise(e=>{window.addEventListener("DOMContentLoaded",e,{once:!0})})}},424:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.window=t.chrome=void 0;
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
const r="undefined"!=typeof browser?browser:chrome;t.chrome=r;const s=window;t.window=s},695:function(e,t,n){e.exports=n(696)},696:function(e,t,n){"use strict";n.r(t);n(697)},697:function(e,t,n){"use strict";var r;n(698),
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
(0,((r=n(708))&&r.__esModule?r:{default:r}).default)()},698:function(e,t,n){"use strict";n(699),n(702),n(703),n(704),n(706),n(707)},699:function(e,t,n){"use strict";var r=n(423);function s(e,t){const n=[];if(window.parent!==window&&window.document&&window.document.scripts)for(let e=0;e<window.document.scripts.length;e+=1){const t=window.document.scripts[e].src;t.startsWith("http")&&n.push(t)}let r=e.target;1!==r.nodeType&&(r=r.parentNode);let s=null;r.closest("a[href]")&&(s=r.closest("a[href]").getAttribute("href"));const o={target:{baseURI:e.target.baseURI,value:e.target.value,href:e.target.href,parentNode:{href:e.target.parentNode?e.target.parentNode.href:null},linksSrc:n}};t.app.modules.core.action("recordMouseDown",o,
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
function(e){let t,n=e.target;try{for(let e=0;e<5;e+=1){if(t=n.innerHTML,-1!==t.indexOf("http://")||-1!==t.indexOf("https://"))return t;n=n.parentNode,e+=1}}catch(e){}}(e),s)}function o(){return window.document.documentElement.outerHTML}function i(e){const t=window.document.querySelector(e);try{return t.click(),!0}catch(e){return!1}}function a(e,t,{shadowRootSelector:n=null,attributeType:r="property"}={}){const s=n?window.document.querySelector(n).shadowRoot:window.document,o=t.split(","),i=(e,t)=>"property"===r?e[t]:e.getAttribute(t);return Array.prototype.map.call(s.querySelectorAll(e),e=>o.length>1?o.reduce((t,n)=>({...t,[n]:i(e,n)}),{}):i(e,t))}function c(e){const t=window.document;return Array.prototype.map.call(t.querySelectorAll(e),e=>window.getComputedStyle(e))}(0,n(191).registerContentScript)({module:"core",matches:["<all_urls>"],allFrames:!0,matchAboutBlank:!0,js:[(e,t,n)=>{const l=e=>{s(e,n)};e.addEventListener("mousedown",l);const u=()=>{!function(e,t){if(!(0,r.isTopWindow)(e))return;const n=e.document.getElementsByTagName("html").item(0).getAttribute("lang"),s=e.document.querySelector("title"),o=e.document.querySelector("meta[name=description]"),i=e.document.querySelector('meta[property="og:title"]'),a=e.document.querySelector('meta[property="og:description"]'),c=e.document.querySelector('meta[property="og:image"]');t.app.modules.core.action("recordMeta",e.location.href,{title:s&&s.innerHTML,description:o&&o.content,ogTitle:i&&i.content,ogDescription:a&&a.content,ogImage:c&&c.content,lang:n})}(e,n)};return e.addEventListener("DOMContentLoaded",u),e.addEventListener("unload",()=>{e.removeEventListener("mousedown",l),e.removeEventListener("DOMContentLoaded",u)},{once:!0}),{getHTML:o,click:i,queryHTML:a,queryComputedStyle:c}}]})},700:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const{protocol:n,hostname:i,pathname:a,search:c}=new URL(t),l=function(e){if("<all_urls>"===e)return{scheme:r,host:null,path:null};const t=e.indexOf("://");if(-1===t)throw new Error('<scheme> missing, "://" not found');const n=e.slice(0,t),i=function(e){if("*"===e)return new Set(["http","https","ws","wss"]);if(r.has(e))return new Set([e]);throw new Error("<scheme> is not valid: "+e)}(n),a=e.indexOf("/",t+3);if(-1===a)throw new Error('<path> missing, "/" not found');const c=e.slice(t+3,a),l=function(e,t){if(t.includes(":"))throw new Error("<host> must not include a port number");if(0===t.length){if("file"===e)return/^$/;throw new Error('<host> is optional only if the scheme is "file"')}const n=t.lastIndexOf("*");if(-1!==n){if("*"===t)return null;if(0!==n)throw new Error("<host> wildcard may only appear at the start");if("."!==t[1])throw new Error('<host> only "*" and "*." followed by hostname parts are valid');const e=t.slice(2);if(!1===s.test(e))throw new Error("<host> contains invalid characters");return new RegExp(`^(?:.*[.])?${o(e)}$`)}if(!1===s.test(t))throw new Error("<host> contains invalid characters");return new RegExp(`^${o(t)}$`)}(n,c),u=function(e){return new RegExp(`^${o(e)}$`)}(e.slice(a+1));return{scheme:i,host:l,path:u}}(e);if(!1===l.scheme.has(n.slice(0,n.length-1)))return!1;if(null!==l.host&&!1===l.host.test(i))return!1;if(null!==l.path&&!1===l.path.test(`${a.slice(1)}${c}`))return!1;return!0};
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
const r=new Set(["http","https","ws","wss","ftp","ftps","data","file"]),s=/^[.\w_-]+$/;function o(e){return e.replace(/([|.$+?{}()[\]\\])/g,"\\$1").replace(/\*/g,".*")}},701:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=n(424);
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
function o(){}var i="development"===((r=n(39))&&r.__esModule?r:{default:r}).default.environment?s.window.console:new Proxy({},{get:()=>o});t.default=i},702:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDom=l;var r,s=(r=n(185))&&r.__esModule?r:{default:r},o=n(191),i=n(108),a=n(336);
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
function c(e){window.console.error("[human-web] Exception caught:",e)}function l(e,t,n){const r=t.document;try{let e=null;if(e=r.querySelector("script"),e&&e.innerHTML.indexOf("location.replace")>-1){const e=r.querySelector("title").textContent;s.default.sendMessage({module:"human-web",action:"jsRedirect",args:[{message:{location:e,url:r.location.href}}]})}}catch(e){c(e)}try{let e="",t=!1;r.querySelector("#s0p1c0")&&(e=r.querySelector("#s0p1c0").href),r.querySelector("#tads .ads-ad")&&null===r.querySelector("#tads .ads-ad").offsetParent&&(t=!0);const s={type:"dom",ad:e,hidden:t};n.action("contentScriptTopAds",{message:s})}catch(e){c(e)}try{const e={},r=t.document;let s=0;const o={query:{element:"#rso",attribute:"data-async-context"},adSections:[".ads-ad",".pla-unit-container",".pla-hovercard-content-ellip",".cu-container tr"],0:{cu:".ad_cclk a[id^='s0p'],.ad_cclk a[id^='n1s0p'],.ad_cclk a[id^='s3p']",fu:".ad_cclk a[id^='vs0p'],.ad_cclk a[id^='vn1s0p'],.ad_cclk a[id^='vs3p']"},1:{cu:"a[id^='plaurlg']",fu:"a[id^='vplaurlg']"},2:{cu:"a[id^='plaurlh']",fu:"a[id^='vplaurlh']"},3:{cu:"a[id^='plaurlt']",fu:"a[id^='vplaurlt']"}},i=r.querySelector(o.query.element);let c="";if(i){c=i.getAttribute(o.query.attribute).replace("query:","");try{c=decodeURIComponent(c)}catch(e){}}o.adSections.forEach((t,n)=>{Array.prototype.slice.call(r.querySelectorAll(t)).forEach(t=>{const r=o[n].cu,i=o[n].fu,l=t.querySelector(r),u=t.querySelector(i);if(l&&u){const t=(0,a.normalizeAclkUrl)(l.href);e[t]={ts:Date.now(),query:c,furl:[u.getAttribute("data-preconnect-urls"),u.href]},s+=1}})}),s>0&&n.action("adClick",{ads:e})}catch(e){c(e)}}(0,o.registerContentScript)({module:"human-web",matches:["http://*/*","https://*/*"],js:[function(e,t,n){e.location.href;const r=n.app.modules["human-web"];function s(e){return t=>{r.action(e,{target:{baseURI:t.target.baseURI}})}}e.top===e&&e.addEventListener("DOMContentLoaded",()=>{l(0,e,r)});const o=(0,i.throttle)(e,s("hw:keypress"),250),a=(0,i.throttle)(e,s("hw:mousemove"),250),c=(0,i.throttle)(e,s("hw:scroll"),250),u=(0,i.throttle)(e,s("hw:copy"),250);e.addEventListener("keypress",o),e.addEventListener("mousemove",a),e.addEventListener("scroll",c),e.addEventListener("copy",u),e.addEventListener("unload",(function(t){if(!t||t.target===e.document){try{String(e)}catch(e){return}e.removeEventListener("keypress",o),e.removeEventListener("mousemove",a),e.removeEventListener("scroll",c),e.removeEventListener("copy",u)}}))}],allFrames:!0})},703:function(e,t,n){
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */},704:function(e,t,n){"use strict";var r,s=(r=n(705))&&r.__esModule?r:{default:r};
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
(0,n(191).registerContentScript)({module:"adblocker",matches:["http://*/*","https://*/*"],matchAboutBlank:!0,allFrames:!0,js:[(e,t,n)=>{(0,s.default)(e,!0,async e=>await n.app.modules.adblocker.action("getCosmeticsFilters",e)||{})}]})},705:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.injectCosmetics}});var r=n(827)},706:function(e,t,n){"use strict";var r=n(191);
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */const s=chrome.runtime.getURL("/modules/anti-phishing/phishing-warning.html?u=");(0,r.registerContentScript)({module:"anti-phishing",matches:["http://*/*","https://*/*"],js:[(e,t,n)=>{n.app.modules["anti-phishing"].action("isPhishingURL",e.location.href).then(({block:t,type:n})=>{t&&"phishingURL"===n&&(e.location=`${s}${encodeURIComponent(e.location)}`)})}]})},707:function(e,t,n){"use strict";var r=n(191),s=n(146);
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
function o(e){const{host:t,hostname:n,pathname:r,protocol:s}=document.location,o=performance.timing.domContentLoadedEventStart-performance.timing.requestStart||0;e.app.modules.insights.action("recordPageInfo",{domain:`${s}//${t}${r}`,host:n,timestamp:performance.timing.navigationStart,latency:o,pageTiming:{timing:{navigationStart:performance.timing.navigationStart,loadEventEnd:performance.timing.loadEventEnd}}})}(0,r.registerContentScript)({module:"insights",matches:["http://*/*","https://*/*"],js:[function(e,t,n){"complete"!==document.readyState?e.addEventListener("load",()=>{(0,s.setTimeout)(()=>{o(n)},1)}):o(n)}]})},708:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if("html"!==r.window.document.documentElement.nodeName.toLowerCase())return;const e=new o.default;new Promise(e=>{void 0!==r.window.CLIQZ?e(r.window.CLIQZ):(r.window.runCliqz=e,s.default.sendMessage({module:"core",action:"status"}).then(e=>({app:e})).then(e,()=>{}))}).then(t=>{for(const[e,n]of Object.entries(t.app.modules))n.action=(t,...n)=>s.default.sendMessage({module:e,action:t,args:n});e.setActionCallbacks((0,i.runContentScripts)(r.window,r.chrome,t)),r.window.addEventListener("unload",()=>{e.unload()},{once:!0})})};var r=n(424),s=a(n(185)),o=a(n(709)),i=n(191);function a(e){return e&&e.__esModule?e:{default:e}}
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */},709:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(710)),s=o(n(185));function o(e){return e&&e.__esModule?e:{default:e}}class i{constructor(){var e,t,n;n=5e3,(t="MAX_BUFFER_LEN")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,this.buffer=[],this.onMessage=e=>this.buffer.length<this.MAX_BUFFER_LEN?new Promise((t,n)=>{this.buffer.push({message:e,resolve:t,reject:n})}):Promise.reject(new Error(`content-script actions buffer limit exceeded: ${this.buffer.length} ${this.MAX_BUFFER_LEN}`))}init(){s.default.onMessage.addListener(this.onMessage)}unload(){s.default.onMessage.removeListener(this.onMessage)}}t.default=class{constructor(){this.actions=null,this.messageHandlers=[new i];for(const e of this.messageHandlers)e.init()}unload(){for(const e of this.messageHandlers)e.unload();this.messageHandlers=[]}setActionCallbacks(e){const t=this.messageHandlers[0].buffer;this.unload();for(const[n,s]of Object.entries(e)){const e=new r.default(n,s);for(const{message:n,resolve:r,reject:s}of t){const t=e.onMessage(n);void 0!==t&&t.then(r).catch(s)}e.init(),this.messageHandlers.push(e)}}}},710:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,s=(r=n(185))&&r.__esModule?r:{default:r};t.default=
/*!
 * Copyright (c) 2014-present Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */
class{constructor(e,t){this.onMessage=n=>{if(n.module===e){const e=t[n.action];if(void 0!==e){let t=n.args||[];return void 0!==n.message&&(t=[n.message]),Promise.resolve(e(...t))}}}}init(){s.default.onMessage.addListener(this.onMessage)}unload(){s.default.onMessage.removeListener(this.onMessage)}}},827:function(e,t,n){"use strict";n.r(t),n.d(t,"injectCosmetics",(function(){return v}));var r=n(161);
/*!
 * Copyright (c) 2017-2019 Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */const s=new Set(["br","head","link","meta","script","style","s"]);function o(e){return 1===e.nodeType}function i(e){return s.has(e.nodeName.toLowerCase())}class a{constructor(e){this.cb=e,this.knownIds=new Set,this.knownHrefs=new Set,this.knownClasses=new Set,this.observer=null}queryAll(e){this.cb({type:"elements",elements:[e.document.documentElement]}),this.handleUpdatedNodes([e.document.documentElement])}start(e){null===this.observer&&void 0!==e.MutationObserver&&(this.observer=new e.MutationObserver(e=>{this.handleUpdatedNodes(function(e){const t=[];for(const n of e)if("attributes"===n.type)o(n.target)&&t.push(n.target);else if("childList"===n.type)for(const e of n.addedNodes)o(e)&&"cliqz-adblocker-script"!==e.id&&t.push(e);return t}(e))}),this.observer.observe(e.document.documentElement,{attributes:!0,attributeFilter:["class","id","href"],childList:!0,subtree:!0}))}stop(){null!==this.observer&&(this.observer.disconnect(),this.observer=null)}handleNewFeatures({hrefs:e,ids:t,classes:n}){const r=[],s=[],o=[];for(const e of t)!1===this.knownIds.has(e)&&(r.push(e),this.knownIds.add(e));for(const e of n)!1===this.knownClasses.has(e)&&(s.push(e),this.knownClasses.add(e));for(const t of e)!1===this.knownHrefs.has(t)&&(o.push(t),this.knownHrefs.add(t));return(0!==r.length||0!==s.length||0!==o.length)&&(this.cb({type:"features",classes:s,hrefs:o,ids:r}),!0)}handleUpdatedNodes(e){return 0!==e.length&&(this.cb({type:"elements",elements:e.filter(e=>!1===i(e))}),this.handleNewFeatures(function(e){const t=new Set,n=new Set,r=new Set;for(const s of e)for(const e of[s,...s.querySelectorAll("[id],[class],[href]")]){if(i(e))continue;const s=e.id;s&&r.add(s);const o=e.classList;if(o)for(const e of o)t.add(e);const a=e.getAttribute("href");"string"==typeof a&&n.add(a)}return{classes:Array.from(t),hrefs:Array.from(n),ids:Array.from(r)}}(e)))}}function c(e,t){const n=t.createElement("script");n.type="text/javascript",n.id="cliqz-adblocker-script",n.async=!1,n.appendChild(t.createTextNode(function(e){return`try{${e}}catch(c){}!function(){var c=document.currentScript,e=c&&c.parentNode;e&&e.removeChild(c)}();`}(e)));const r=t.head||t.documentElement;null!==r&&r.appendChild(n)}
/*!
 * Copyright (c) 2017-2019 Cliqz GmbH. All rights reserved.
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at https://mozilla.org/MPL/2.0/.
 */let l=!0,u=null,m=null;const d=new Set,g=[],f=new Map;function p(){null!==u&&(u.stop(),u=null)}function h(e){return new Promise(t=>{chrome.runtime.sendMessage(Object.assign({action:"getCosmeticsFilters"},e),e=>{void 0!==e&&t(e)})})}function A(e,t,n){var s;const o=null===(s=n.get(e))||void 0===s?void 0:s.get(t);if(void 0!==o)return o;const i=new Set(Object(r.d)(e,t.ast));if(void 0!==t.attribute){let r=n.get(e);void 0===r&&(r=new Map,n.set(e,r));let s=r.get(t);void 0===s&&(s=new Set,r.set(t,s));for(const e of i)s.add(e)}return i}function y(e){if(0!==g.length&&!d.has(window.document.documentElement)){for(const t of e){if(t===window.document.documentElement){d.clear(),d.add(t);break}d.add(t)}null===m&&(m=setTimeout(()=>{m=null,function(){if(0===d.size||0===g.length)return;const e=new Map,t=new Map,n=[...d].filter(e=>!0===e.isConnected);d.clear();for(const r of n)for(const n of g)for(const s of A(r,n,e))!0===n.remove?(s.textContent="",s.remove()):void 0!==n.attribute&&!1===f.has(s)&&t.set(s,{selector:n,root:r});for(const[e,{selector:n,root:r}]of t.entries())void 0!==n.attribute&&(e.setAttribute(n.attribute,""),f.set(e,{selector:n,root:r}));for(const[t,{selector:n,root:r}]of[...f.entries()])void 0!==n.attribute&&(!1!==r.isConnected&&!1!==t.isConnected&&!1!==A(r,n,e).has(t)||(f.delete(t),t.removeAttribute(n.attribute)))}()},1e3))}}function b(e,{active:t,scripts:n,extended:r}){if(!1===t)return l=!1,void p();l=!0,n&&setTimeout(()=>{for(const t of n)c(t,e.document)},0),r&&r.length>0&&(g.push(...r),y([e.document.documentElement]))}function v(e,t=!0,n=h){n({lifecycle:"start",ids:[],classes:[],hrefs:[]}).then(t=>b(e,t)),e.addEventListener("DOMContentLoaded",()=>{u=new a(t=>{"elements"===t.type?0!==t.elements.length&&y(t.elements):n(Object.assign(Object.assign({},t),{lifecycle:"dom-update"})).then(t=>b(e,t))}),u.queryAll(e),l&&t&&u.start(e)},{once:!0,passive:!0}),e.addEventListener("unload",p,{once:!0,passive:!0})}}});